async function init(o,t={}){let[e,a]=parseCompURL(o);if(void 0!==t.additionalModules)try{await loadMods(a,t.additionalModules)}catch(o){throw console.error(o),o}console.time("load Modules for "+e),void 0!==t.dependencies&&await Promise.all(t.dependencies.map(async t=>{try{await import(`${a}/components/${t.constructor===Array?t.join("/"):t}/index.js`)}catch(o){throw`Component "${e}" could not load dependency "${t}" so stopping!!`}})),console.timeEnd("load Modules for "+e);try{await loadComponent(o)}catch(o){throw o.stack}}async function loadComponent(o,t=!1){var[o,e]=parseCompURL(o),t=o+(t?"_v"+t:""),e=e+`/components/${o}/`+(o.includes("/")?t.slice(t.lastIndexOf("/")+1):t);try{await loadTemplate(e+".html"),await import(e+".js")}catch(o){throw console.log(o),o}}async function loadMods(o,t=[]){t=[{label:"rtBC",file:"rt_baseclass.mjs"}].concat(t);return Promise.all(t.map(async t=>{if(void 0===window[t.label])try{window[t.label]=await import(o+"/modules/"+t.file)}catch(o){throw`module "${t.label}" failed to load`}return window[t.label]}))}async function loadTemplate(o){try{var t=await fetch(o);if(!t.ok)throw`Failed to load ${o} with status `+t.status;var e=await t.text();document.head.insertAdjacentHTML("beforeend",e)}catch(o){throw console.log("loadTemplate() - "+o),o}}function parseCompURL(o){var t=o.split("/");if(4<t.length&&t.includes("components"))return[t.slice(t.indexOf("components")+1,t.length-1).join("/"),o.slice(0,o.indexOf("/components"))]}export{init,loadComponent,loadMods,parseCompURL};