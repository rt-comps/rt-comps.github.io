const[compName]=rt.parseURL(import.meta.url);customElements.define(compName,class extends rtBase.RTBaseClass{constructor(){const e=super().attachShadow({mode:"open"});e.append(this.$getTemplate()),this.addEventListener("updatemenu",e=>this.updateData(e)),e.querySelector("#add-items-button").addEventListener("click",()=>this.addToCart()),e.querySelector("#place-order-button").addEventListener("click",()=>this.dispatchOrder())}connectedCallback(){this.processMenuItems(),this.style.display="inline-block"}processMenuItems(){const e=this.querySelector("form-config span#imgpath").innerHTML,t=[...this.querySelectorAll("item-data")];this.append(...t.map(t=>{let r={id:t.id,slot:"menu-items"},i=t.querySelector("img");return i&&(r.bgimg=`${e}/${i.getAttribute("file")}`),this.$createElement({tag:"menu-item",innerHTML:`${t.querySelector("item-title").innerHTML}`,attrs:r})}))}updateData(e){e.stopPropagation(),this.querySelectorAll("item-data").forEach(e=>{e.removeAttribute("slot")}),e.detail.id&&this.querySelector(`item-data#${e.detail.id}`).setAttribute("slot","active-data")}addToCart(){const e=this.querySelectorAll('[slot="active-data"] item-line');for(let t=0;t<e.length;t++){const r=e[t],i=r.shadowRoot,n=i.querySelector("#count");if("0"===n.innerHTML)continue;const a=`${r.parentNode.parentNode.querySelector("item-title").innerHTML} - ${r.parentNode.getAttribute("value")} - ${r.innerHTML}`;this.append(this.$createElement({tag:"line-item",innerHTML:a,attrs:{slot:"cart",count:`${n.innerHTML}`,unit:`${parseInt(r.getAttribute("prijs"))}`}})),n.innerHTML="0",i.querySelector("#container").style.fontWeight=""}}dispatchOrder(){this.$dispatch({name:"updatemenu"});const e=[...this.querySelectorAll("line-item")];e.length>0&&this.$dispatch({name:"neworder",detail:{orderdetails:e.map(e=>{const t={item:e.innerHTML,count:parseInt(e.shadowRoot.querySelector("#count").innerHTML),unit:e.getAttribute("unit")};return e.remove(),t})}})}});