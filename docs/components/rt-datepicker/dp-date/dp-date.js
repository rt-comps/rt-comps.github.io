let[compName]=rtlib.parseCompURL(import.meta.url);customElements.define(compName.slice(compName.lastIndexOf("/")+1),class extends rtBC.RTBaseClass{#_sR;#_locale;#_date=new Date;constructor(){super(),this.#_sR=this.attachShadow({mode:"open"}),this.#_sR.append(this.$getTemplate()),this.#_locale=this.$attr("locale")||void 0,this.#_sR.querySelector("#container").addEventListener("click",()=>this.pickDate())}connectedCallback(){setTimeout(()=>{this.parentNode?(this.parentNode.addEventListener("changeWeek",()=>this.render()),this.parentNode.addEventListener("choiceMade",e=>this.reset(e)),this.#_locale=this.parentNode._locale||this.#_locale,this.render()):console.error(this.localName+" - Could find parent")})}static get observedAttributes(){return["invalid"]}attributeChangedCallback(){this.render()}render(){var e,t,a;this.hasAttribute("day")?(e=new Date,t=parseInt(this.$attr("day")),a=this.parentNode._week||0,this.#_sR.querySelector("#container").style.color=this.hasAttribute("invalid")||0===a&&e.getDay()>t?"rgb(204,204,204)":"rgb(0,0,0)",this.#_date=e,this.#_date.setDate(e.getDate()+7*a+(t-e.getDay())),this.#_sR.querySelector("#day").innerHTML=this.$localeDate(this.#_date,this.#_locale,{weekday:"short"}),this.#_sR.querySelector("#date").innerHTML=this.#_date.getDate()+" "+this.$localeDate(this.#_date,this.#_locale,{month:"short"})):(this.#_sR.querySelector("#day").innerHTML="ERROR",this.#_sR.querySelector("#date").innerHTML="...")}pickDate(){var e=this.#_sR.querySelector("#container");"rgb(0, 0, 0)"==e.style.color&&(e.classList.add("chosen"),this.$dispatch({name:"datepicked",detail:{date:this.#_date,day:this.$attr("day")}}))}reset(e){this.hasAttribute("invalid")||this.$attr("day")!==e.detail.day&&this.#_sR.querySelector("#container").classList.remove("chosen")}});