const[compName,compPath]=rtlib.parseCompURL(import.meta.url);customElements.define(compName,class extends rtBC.RTBaseClass{#_sR;constructor(){super(),this.#_sR=this.attachShadow({mode:"open"}),this.#_sR.append(this.$getTemplate()),this.getMenu(),this.addEventListener("neworder",t=>this.dispatchOrder(t))}getMenu(){if(this.hasAttribute("datafile")&&this.getAttribute("datafile")){var t=this.getAttribute("datafile");const e=t.match(/^http[s]?:\/\//)?""+t:compPath+"/"+t;try{fetch(e).then(t=>{if(t.ok)return t.text();throw`Failed to load ${e} with status `+t.status}).then(t=>{t=document.createRange().createContextualFragment(t);this.#_sR.appendChild(t)})}catch(t){console.warn(t)}}else{t=document.createRange().createContextualFragment('<h1 style="color: red;">datafile attribute not provided</h1>');this.#_sR.appendChild(t)}}dispatchOrder(t){t&&t.stopPropagation(),t.detail&&(t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tag:"item-line",order:t.detail.order,details:t.detail.person})},fetch("https://roads-technology.com/rtform/sendmail.php",t).then(t=>{if(t.ok)return t.text()}).then(t=>{"OK"===t.slice(-2)&&"NOK"!==t.slice(-3)?this.#_sR.querySelector("rt-orderform").accepted():(alert("Order submission failed"),console.warn(t))}))}show(){this.#_sR.querySelector("dialog").showModal()}});