const[compName]=rtlib.parseURL(import.meta.url);customElements.define(compName,class extends rtBC.RTBaseClass{static formAssociated=true;#_sR;#_internals;#_eventBus;#_maxWeek;#_value;constructor(){super();this.#_sR=this.attachShadow({mode:"open"});this.#_sR.append(this.$getTemplate());this.#_internals=this.attachInternals();this.#_eventBus=this.#_sR.querySelector("#container");this.#_maxWeek=this.hasAttribute("maxweek")?parseInt(this.getAttribute("maxweek"))-1:undefined;this.#_eventBus._week=0;this.#_eventBus._locale=this.getAttribute("locale")||undefined;this.#_sR.querySelector("#al").addEventListener("click",()=>this.arrowRespond(-1));this.#_sR.querySelector("#ar").addEventListener("click",()=>this.arrowRespond(1));this.addEventListener("datepicked",e=>this.dpRespond(e));if(this.hasAttribute("invalid")){const invalidDays=this.getAttribute("invalid").split(",").map(Number);const dateNodes=this.#_sR.querySelectorAll("dp-date");dateNodes.forEach(node=>{if(invalidDays.indexOf(node.getAttribute("day")%7)>-1){node.setAttribute("invalid","")}})}}formAssociatedCallback(){if(this.#_internals.form){this.#_internals.form.addEventListener("formdata",e=>e.formData.set("picked-date",this.#_value))}}formResetCallback(){this.clearChosen();this.#_eventBus._week=0;this.$dispatch({name:"changeWeek",composed:false,eventbus:this.#_eventBus})}arrowRespond(change){this.clearChosen();this.#_eventBus._week+=change;if(this.#_eventBus._week<0)this.#_eventBus._week=0;if(this.#_maxWeek&&this.#_eventBus._week>this.#_maxWeek)this.#_eventBus._week=this.#_maxWeek;this.$dispatch({name:"changeWeek",composed:false,eventbus:this.#_eventBus})}dpRespond(e){this.#_value=this.$localeDate(e.detail.date,this.#_eventBus._locale,{weekday:"short",month:"short",year:"numeric",day:"numeric"});this.dispatchChoice(e.detail.day)}clearChosen(){this.dispatchChoice("-1");this.#_value=null}dispatchChoice(day){this.$dispatch({name:"choiceMade",detail:{day:day},composed:false,eventbus:this.#_eventBus})}get value(){return this.#_value}get name(){return this.getAttribute("name")}checkValidity(){return this.#_value?true:false}focus(){this.#_sR.querySelector("#container").focus()}});
