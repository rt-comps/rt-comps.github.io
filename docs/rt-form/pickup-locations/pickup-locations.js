const[compName]=rtlib.parseURL(import.meta.url);customElements.define(compName,class extends rtBC.RTBaseClass{static formAssociated=true;#_sR;#_internals;#_times;constructor(){super();this.#_sR=this.attachShadow({mode:"open"});this.#_sR.append(this.$getTemplate());this.#_internals=this.attachInternals();this.#_times=this.#_sR.querySelector("#pu-times");this.render();this.#_sR.querySelector("#pickup").addEventListener("change",e=>this.updateLoc(e))}formAssociatedCallback(){if(this.#_internals.form){this.#_internals.form.addEventListener("formdata",e=>{const location=this.#_sR.querySelector('input[name="location"]:checked');const time=this.#_sR.querySelector('input[name="time-slot"]:checked');e.formData.append(`pickup-location`,location?location.value:"");e.formData.append(`pickup-time`,time?time.value:"")})}}formResetCallback(){const checked=[...this.#_sR.querySelectorAll("input:checked")];checked.forEach(el=>el.checked=false);this.#_times.style.display="none"}render(){const nodes=[...this.querySelectorAll("pu-loc")];if(nodes.length){const _createRadioLabel=(name,value)=>this.$createElement({tag:"label",append:[this.$createElement({tag:"input",type:"radio",name:name,value:value,required:true}),this.$createElement({tag:"span",innerHTML:`&nbsp;${value}`})]});this.#_sR.querySelector("fieldset#pickup").append(...nodes.map(element=>_createRadioLabel("location",element.id)));this.#_sR.querySelector("fieldset#pu-times").append(...nodes.map(element=>{let newEl;const innerNodes=[...element.querySelectorAll("time-slot")];if(innerNodes.length){const toAppend=[...innerNodes.map(el=>_createRadioLabel("time-slot",el.innerHTML))];newEl=this.$createElement({tag:"div",id:`rad-${element.id}`,hidden:true,append:toAppend})}return newEl}))}}updateLoc(e){if(this.#_times.style.display==="none")this.#_times.style.display="";const allNodes=[...this.shadowRoot.querySelectorAll("fieldset div")];allNodes.forEach(element=>{if(element.id===`rad-${e.target.value}`)element.hidden=false;else element.hidden=true});const isChecked=this.shadowRoot.querySelector('input[name="time-slot"]:checked');if(isChecked)isChecked.checked=false}checkValidity(){return this.#_sR.querySelector('input[name="location"]:checked')&&this.#_sR.querySelector('input[name="time-slot"]:checked')?true:false}focus(){const times=this.#_sR.querySelector("#pu-times");if(times.style.display){this.#_sR.querySelector("#fs-pickup").focus()}else{this.#_sR.querySelector("#fs-time").focus()}}});
